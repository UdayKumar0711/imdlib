# This workflows will upload a Python Package using Twine when a release is created
# For more information see: https://help.github.com/en/actions/language-and-framework-guides/using-python-with-github-actions#publishing-to-package-registries

name: pypi

# Controls when the action will run.   
on:
  workflow_dispatch: 
  # # Triggers the workflow on push or pull request events but only for the master branch  
  # push:  
  #   branches: [ master ]  
  # pull_request:  
  #   branches: [ master ]  

  # # Allows you to run this workflow manually from the Actions tab  
  # workflow_dispatch:

# jobs:
#   deploy:

#     runs-on: ubuntu-latest

#     steps:
#     - uses: actions/checkout@v2
#     - name: Set up Python
#       uses: actions/setup-python@v2
#       with:
#         python-version: '3.x'
#     - name: Install dependencies
#       run: |
#         python -m pip install --upgrade pip
#         pip install setuptools wheel twine
#     - name: Build and publish
#       env:
#         TWINE_USERNAME: ${{ secrets.PYPI_USERS }}
#         TWINE_PASSWORD: ${{ secrets.PYPI_PASSWORD }}
#       run: |
#         python setup.py sdist bdist_wheel
#         twine upload dist/*

jobs:
  deploy:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Set up miniconda
      uses: conda-incubator/setup-miniconda@v2
      with:
        activate-environment: test_env
        auto-activate-base: false
        auto-update-conda: false
    - run: |
        conda info
        conda list
        conda config --show-sources
        conda config --show
        conda config --set always_yes true --set changeps1 no
        echo $PWD
        echo $CONDA
        echo $PATH
        conda install -y -c anaconda python=3.6